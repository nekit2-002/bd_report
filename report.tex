\include{preamble}

\newtotcounter{citenum} %From the package documentation
\def\oldbibitem{}
\let\oldbibitem=\bibitem
\def\bibitem{\stepcounter{citenum}\oldbibitem}

\begin{document}
\includepdf[pages={1}]
{title.pdf}

\tableofcontents
\newpage
\section{Формулировка задания и описание предметной области}
Необходимо спроектировать базу данных для стримингового сервиса фильмов и сериалов "Netflix", позволяющего смотреть их, оценивать или скачивать.
База данных должна содержать информацию о пользователях, фильмах, их жанрах, возрастных ограничениях, а также о режиссерах, их наградах и многих других
чертах, присущих продуктам киноиндустрии.

\subsection{Конкретизация предметной области}
Поскольку ведется разработка базы данных для сайта, посвященного кино, она будет строиться вокруг двух центральных сущностей: фильма и пользователя.
Так же эта база данных должна (далее БД) отражать, каким образом пользователь получит доступ к фильмам и на какой это будет срок.

Для открытия доступа к фильмам пользователь должен будет оформлять подписку, но некоторые опции (такие как, например, просмотр трейлера) будут доступны
и без нее. Для удобства в БД будет содержаться информация о том, из какой страы пользователь, в какой валюте он оплачивает подписку, способ ее оплаты,
длительность и наличие автопродления.

Для того чтобы поиск фильмов мог осуществляться по самым разообразым критериям, в БД будут добавлена информация о жанрах фильмов, их хронометраже,
актерах, снимавшихся в них, а также режиссерах, отвечавших за их производство. Помимо этого, можно будет провести поиск и по киностудии,
которая отвечала за съемки.

Итого, можно выделить следующие возможности, предоставляемые БД:
\begin{itemize}
\item Учет персональной информации о пользователях
\item Предоставление информации о фильмах, режиссерах и тд
\item Информация об комментариях пользователей, их оценках фильмов
\end{itemize}
Для реализации описанного выше функционала были выделены сущности:
\begin{itemize}
    \item Фильм
    \item Пользователь (User)
    \item Языки
    \item Актер
 \item Режиссер
    \item Награда
      \item Жанр
    \item Подписки
    \item Валюта
    \item Качество видео
    \item Категория фильма (хронометраж)
    \item Отзыв
    \item Студия производства
\end{itemize}

\subsection{Концептуальная модель}
После более детального рассмотрения предметной области была спроектирована следующая концептуальная модель базы данных:
\begin{figure} [h]
    \center{\includegraphics[width=1\linewidth]{concept}}
    \caption{Концептуальная модель базы данных}
\end{figure}

\subsection{Описание неочевидных атрибутов}
В процессе проектирования у сущностей были выделены следующие атрибуты:

\begin{enumerate}
\item Уникальные идентификаторы для каждой сущности: mov\_id, actor\_id (позднее act\_id), user\_id, award\_id,
cur\_id, sub\_id, rev\_id, prod\_id, lang\_id, watch\_id, g\_id, pc\_id, vr\_id
\item Наименование категории фильма -- его характеристика по хронометражу, то есть сериал, полнометражный, короткометражный и др.
\item Страна производства -- страна, в которой был снят фильм. Поскольку их может быть много, атрибут многозначный
\item Наименование качества видео -- разрешение в котором его можно смотреть.
\item Аудиодорожка и субтитры фильма -- разделены, поскольку пользователь может смотреть фильм, например, в оргинальной озвучке,
    но в субтитрах родного языка.
\end{enumerate}

\section{Логическое проектирование}
После завершения проектирования концептуальной модели базы данных, на ее основе была создана логическая модель,
представленная ниже {см рис \ref{logic}}:

\begin{figure}
    \begin{subfigure}{.4\linewidth}
    \includegraphics[width=1\linewidth]{logic1}
    \end{subfigure}

    \begin{subfigure}{.5\linewidth}
    \includegraphics[width=1\linewidth]{logic2}
    \end{subfigure}

    \caption{Логическая модель базы данных}
    \label{logic}
\end{figure}

Все связи типа «Многие ко многим» были реализованы через отдельные таблицы.
\newpage

\section{Физическое проектирование}
В качестве СУБД для реализации разработанной базы данных была выбрана
PostgreSQL. Код для реализации таблиц представлен ниже:
\begin{itemize}
\item Для таблицы Actor:
\begin{figure} [h]
    \center{\includegraphics[width=1\linewidth]{actor}}
    \caption{Фрагмент кода для таблицы Actor}
\end{figure}

\item  Для таблицы Film:
\begin{figure} [h]
    \center{\includegraphics[width=1\linewidth]{film}}
    \caption{Фрагмент кода для таблицы Film}
\end{figure}

\item Для таблицы User:
\begin{figure} [h]
    \center{\includegraphics[width=1\linewidth]{user}}
    \caption{Фрагмент кода для таблицы User}
\end{figure}

\item Для таблицы Director:
\begin{figure} [h]
    \center{\includegraphics[width=1\linewidth]{director}}
    \caption{Фрагмент кода для таблицы Director}
\end{figure}

\item Для таблицы Awards:
\begin{figure} [h]
    \center{\includegraphics[width=1\linewidth]{awards}}
    \caption{Фрагмент кода для таблицы Awards}
\end{figure}

\item Для таблицы Genre:
\begin{figure} [h]
    \center{\includegraphics[width=1\linewidth]{genre}}
    \caption{Фрагмент кода для таблицы Genre}
\end{figure}

\item Для таблицы Review:
\begin{figure} [h]
    \center{\includegraphics[width=1\linewidth]{review}}
    \caption{Фрагмент кода для таблицы Review}
\end{figure}

\item Для таблицы Languages:
\begin{figure} [h]
    \center{\includegraphics[width=1\linewidth]{langs}}
    \caption{Фрагмент кода для таблицы Languages}
\end{figure}

\item Для таблицы Category(хронометраж):
\begin{figure} [h]
    \center{\includegraphics[width=1\linewidth]{category}}
    \caption{Фрагмент кода для таблицы Category}
\end{figure}

\item Для таблицы Rate review(оценок отзывов):
\begin{figure} [h]
    \center{\includegraphics[width=1\linewidth]{rate_review}}
    \caption{Фрагмент кода для таблицы Rate review}
\end{figure}

\item Для таблицы Subtitles:
\begin{figure} [h]
    \center{\includegraphics[width=1\linewidth]{subs}}
    \caption{Фрагмент кода для таблицы Subtitles}
\end{figure}

\item Для таблицы Prodaction company:
\begin{figure} [h]
    \center{\includegraphics[width=1\linewidth]{prod_comp}}
    \caption{Фрагмент кода для таблицы Prodaction}
\end{figure}

\end{itemize}

\end{document}
